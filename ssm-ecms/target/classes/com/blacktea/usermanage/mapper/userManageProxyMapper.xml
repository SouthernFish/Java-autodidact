<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.blacktea.usermanage.proxy.userManageProxy">

    <!--查询用户列表-->
    <select id="getUserList" resultType="map">
        SELECT
            mg_id operatorId,
            mg_name operatorName,
            mg_time registerTime,
            role_id roleId,
            mg_mobile operatorTel,
            mg_email operatorEmail,
            mg_state operatorStatus
        FROM
            sp_manager
        WHERE
            1 = 1
            <if test="searchText != null and searchText != ''">
                AND (mg_name LIKE CONCAT('%', #{searchText},'%')
                OR mg_email LIKE CONCAT('%', #{searchText},'%'))
            </if>
    </select>

    <!--修改用户状态-->
    <update id="updateUserStatus">
        UPDATE
            sp_manager
        SET
            mg_state = #{userStatus}
        WHERE       
            mg_id = #{operatorId}
    </update>  

</mapper>
